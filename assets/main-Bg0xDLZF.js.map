{"version":3,"file":"main-Bg0xDLZF.js","sources":["../../src/main.js"],"sourcesContent":["/**\n * Rho-Form: Full Production Engine 2026\n * All fixes: Word wrapping, Isometric Stack, Captcha, Lenis Sync\n */\n\ndocument.addEventListener('DOMContentLoaded', () => {\n    \n    // --- 1. РЕГИСТРАЦИЯ GSAP ПЛАГИНОВ ---\n    gsap.registerPlugin(ScrollTrigger);\n\n    // --- 2. ПЛАВНЫЙ СКРОЛЛ (LENIS) + GSAP SYNC ---\n    const lenis = new Lenis({\n        duration: 1.2,\n        easing: (t) => Math.min(1, 1.001 - Math.pow(2, -10 * t)),\n        smoothWheel: true,\n    });\n\n    lenis.on('scroll', ScrollTrigger.update);\n\n    gsap.ticker.add((time) => {\n        lenis.raf(time * 1000);\n    });\n    gsap.ticker.lagSmoothing(0);\n\n\n    // --- 3. ГЛОБАЛЬНАЯ КАПЧА ---\n    let sumCorrect;\n    const generateCaptcha = () => {\n        const captchaLabel = document.getElementById('captcha-question');\n        if (!captchaLabel) return;\n        const val1 = Math.floor(Math.random() * 9) + 1;\n        const val2 = Math.floor(Math.random() * 9) + 1;\n        sumCorrect = val1 + val2;\n        captchaLabel.innerText = `${val1} + ${val2}`;\n    };\n    generateCaptcha();\n\n\n    // --- 4. HEADER И МОБИЛЬНОЕ МЕНЮ ---\n    const header = document.querySelector('.header');\n    const menuToggle = document.querySelector('.menu-toggle');\n    const mobileMenu = document.querySelector('.mobile-menu');\n    const mobileLinks = document.querySelectorAll('.mobile-nav__link');\n\n    window.addEventListener('scroll', () => {\n        if (window.scrollY > 50) header.classList.add('header--scrolled');\n        else header.classList.remove('header--scrolled');\n    });\n\n    const toggleMenu = () => {\n        menuToggle.classList.toggle('menu-toggle--active');\n        mobileMenu.classList.toggle('mobile-menu--active');\n        document.body.style.overflow = mobileMenu.classList.contains('mobile-menu--active') ? 'hidden' : '';\n    };\n\n    menuToggle?.addEventListener('click', toggleMenu);\n    mobileLinks.forEach(link => link.addEventListener('click', toggleMenu));\n\n\n    // --- 5. HERO: 3D И БЕЗОПАСНАЯ АНИМАЦИЯ ТЕКСТА ---\n    const initHero = () => {\n        const canvas = document.querySelector('#hero-canvas');\n        if (!canvas) return;\n\n        // Three.js Scene\n        const scene = new THREE.Scene();\n        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);\n        const renderer = new THREE.WebGLRenderer({ canvas, alpha: true, antialias: true });\n        renderer.setSize(window.innerWidth, window.innerHeight);\n        camera.position.z = 5;\n\n        const geo = new THREE.BufferGeometry();\n        const pts = new Float32Array(1500 * 3);\n        for(let i=0; i<4500; i++) pts[i] = (Math.random() - 0.5) * 15;\n        geo.setAttribute('position', new THREE.BufferAttribute(pts, 3));\n        const mat = new THREE.PointsMaterial({ size: 0.02, color: 0x00f5ff, transparent: true, opacity: 0.4 });\n        const cloud = new THREE.Points(geo, mat);\n        scene.add(cloud);\n\n        const animate = () => {\n            requestAnimationFrame(animate);\n            cloud.rotation.y += 0.0008;\n            renderer.render(scene, camera);\n        };\n        animate();\n\n        // SplitType с фиксом разрыва слов\n        const titleElement = document.querySelector('.hero__title');\n        if (titleElement) {\n            // Разбиваем сначала на слова, потом на символы для точности\n            const text = new SplitType(titleElement, { types: 'words, chars' });\n            \n            const tl = gsap.timeline({ delay: 0.5 });\n            tl.from(text.chars, { \n                y: 40, \n                opacity: 0, \n                rotateX: -90, \n                stagger: 0.02, \n                duration: 1, \n                ease: 'power4.out' \n            })\n            .to('.hero__subtitle, .hero__actions, .scroll-down', { \n                opacity: 1, \n                y: 0, \n                stagger: 0.2, \n                duration: 0.8 \n            }, \"-=0.5\");\n        }\n    };\n    initHero();\n\n\n    // --- 6. INFRASTRUCTURE: ISOMETRIC LAYERED STACK ---\n    const layers = document.querySelectorAll('.stack__layer');\n    const infraItems = document.querySelectorAll('.infra-item');\n\n    if (layers.length > 0) {\n        gsap.to(layers, {\n            scrollTrigger: {\n                trigger: \".infra\",\n                start: \"top 70%\",\n                end: \"bottom 20%\",\n                scrub: 1\n            },\n            z: (i) => (i * 80),\n            y: (i) => (i * -35),\n            duration: 1\n        });\n\n        infraItems.forEach(item => {\n            item.addEventListener('mouseenter', () => {\n                const depth = item.getAttribute('data-layer');\n                infraItems.forEach(i => i.classList.remove('active'));\n                item.classList.add('active');\n                \n                layers.forEach(l => {\n                    l.style.borderColor = 'rgba(255,255,255,0.1)';\n                    if(l.dataset.depth == depth) {\n                        l.style.borderColor = 'var(--accent)';\n                        l.style.boxShadow = '0 0 40px var(--accent-glow)';\n                        gsap.to(l, { scale: 1.05, duration: 0.3 });\n                    } else {\n                        l.style.boxShadow = 'none';\n                        gsap.to(l, { scale: 1, duration: 0.3 });\n                    }\n                });\n            });\n        });\n    }\n\n\n    // --- 7. ACADEMY: FLOATING CURSOR PREVIEW ---\n    const cursorImg = document.querySelector('.academy-cursor-img');\n    const academyItems = document.querySelectorAll('.academy-item');\n\n    academyItems.forEach(item => {\n        item.addEventListener('mouseenter', () => {\n            const src = item.getAttribute('data-img');\n            if (cursorImg) {\n                cursorImg.querySelector('img').src = src;\n                gsap.to(cursorImg, { opacity: 1, scale: 1, duration: 0.3 });\n            }\n        });\n        item.addEventListener('mouseleave', () => {\n            if (cursorImg) gsap.to(cursorImg, { opacity: 0, scale: 0.8, duration: 0.3 });\n        });\n        item.addEventListener('mousemove', (e) => {\n            if (cursorImg) {\n                gsap.to(cursorImg, { \n                    x: e.clientX + 25, \n                    y: e.clientY - 120, \n                    duration: 0.6, \n                    ease: \"power2.out\" \n                });\n            }\n        });\n    });\n\n\n    // --- 8. CONTACT FORM: VALIDATION & SUCCESS ---\n    const contactForm = document.getElementById('contact-form');\n    const successBox = document.getElementById('form-success');\n\n    contactForm?.addEventListener('submit', (e) => {\n        e.preventDefault();\n        const answer = parseInt(document.getElementById('captcha-answer').value);\n        \n        if (answer !== sumCorrect) {\n            alert('Wrong captcha answer!');\n            generateCaptcha();\n            return;\n        }\n\n        const btn = contactForm.querySelector('button');\n        btn.innerText = 'Integrating Data...';\n        btn.disabled = true;\n\n        setTimeout(() => {\n            gsap.to(contactForm, { \n                opacity: 0, \n                y: -20, \n                duration: 0.5, \n                onComplete: () => {\n                    contactForm.style.display = 'none';\n                    if (successBox) {\n                        successBox.style.display = 'flex';\n                        gsap.fromTo(successBox, \n                            { opacity: 0, scale: 0.9, y: 20 },\n                            { opacity: 1, scale: 1, y: 0, duration: 0.6, ease: \"back.out(1.7)\" }\n                        );\n                    }\n                }\n            });\n        }, 1500);\n    });\n\n\n    // --- 9. COOKIE POPUP ---\n    const cookiePopup = document.getElementById('cookie-popup');\n    if (!localStorage.getItem('rho_accepted')) {\n        setTimeout(() => cookiePopup?.classList.add('cookie-popup--active'), 3000);\n    }\n    document.getElementById('accept-cookies')?.addEventListener('click', () => {\n        localStorage.setItem('rho_accepted', 'true');\n        cookiePopup?.classList.remove('cookie-popup--active');\n    });\n\n    console.log('Rho-Form Fit: All Systems Green');\n});"],"names":["lenis","t","time","sumCorrect","generateCaptcha","captchaLabel","val1","val2","header","menuToggle","mobileMenu","mobileLinks","toggleMenu","link","canvas","scene","camera","renderer","geo","pts","i","mat","cloud","animate","titleElement","text","layers","infraItems","item","depth","l","cursorImg","src","e","contactForm","successBox","btn","cookiePopup","_a"],"mappings":"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"}
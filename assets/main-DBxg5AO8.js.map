{"version":3,"file":"main-DBxg5AO8.js","sources":["../../src/main.js"],"sourcesContent":["/**\n * Rho-Form: Full Production Suite 2026\n * Features: Lenis Smooth Scroll, GSAP & ScrollTrigger, Three.js, SplitType\n */\n\ndocument.addEventListener('DOMContentLoaded', () => {\n    \n    // --- 1. РЕГИСТРАЦИЯ ПЛАГИНОВ ---\n    // Это исправляет ошибку \"ScrollTrigger is not defined\"\n    gsap.registerPlugin(ScrollTrigger);\n\n    // --- 2. ПЛАВНЫЙ СКРОЛЛ (LENIS) + GSAP SYNC ---\n    const lenis = new Lenis({\n        duration: 1.2,\n        easing: (t) => Math.min(1, 1.001 - Math.pow(2, -10 * t)),\n        smoothWheel: true,\n    });\n\n    // Синхронизация Lenis со ScrollTrigger\n    lenis.on('scroll', ScrollTrigger.update);\n\n    gsap.ticker.add((time) => {\n        lenis.raf(time * 1000);\n    });\n    gsap.ticker.lagSmoothing(0);\n\n\n    // --- 3. ГЛОБАЛЬНЫЕ ПЕРЕМЕННЫЕ И КАПЧА ---\n    let sumCorrect;\n    const generateCaptcha = () => {\n        const captchaLabel = document.getElementById('captcha-question');\n        if (!captchaLabel) return;\n        const val1 = Math.floor(Math.random() * 9) + 1;\n        const val2 = Math.floor(Math.random() * 9) + 1;\n        sumCorrect = val1 + val2;\n        captchaLabel.innerText = `${val1} + ${val2}`;\n    };\n    generateCaptcha();\n\n\n    // --- 4. HEADER: МОБИЛЬНОЕ МЕНЮ И СТИКИ ---\n    const header = document.querySelector('.header');\n    const menuToggle = document.querySelector('.menu-toggle');\n    const mobileMenu = document.querySelector('.mobile-menu');\n    const mobileLinks = document.querySelectorAll('.mobile-nav__link');\n\n    window.addEventListener('scroll', () => {\n        if (window.scrollY > 50) header.classList.add('header--scrolled');\n        else header.classList.remove('header--scrolled');\n    });\n\n    const toggleMenu = () => {\n        menuToggle.classList.toggle('menu-toggle--active');\n        mobileMenu.classList.toggle('mobile-menu--active');\n        document.body.style.overflow = mobileMenu.classList.contains('mobile-menu--active') ? 'hidden' : '';\n    };\n\n    menuToggle?.addEventListener('click', toggleMenu);\n    mobileLinks.forEach(link => link.addEventListener('click', toggleMenu));\n\n\n    // --- 5. HERO: 3D BACKGROUND & TEXT ANIMATION ---\n    const initHeroScene = () => {\n        const canvas = document.querySelector('#hero-canvas');\n        if (!canvas) return;\n\n        const scene = new THREE.Scene();\n        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);\n        const renderer = new THREE.WebGLRenderer({ canvas, alpha: true, antialias: true });\n\n        renderer.setSize(window.innerWidth, window.innerHeight);\n        renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));\n        camera.position.z = 5;\n\n        const geo = new THREE.BufferGeometry();\n        const pts = new Float32Array(1800 * 3);\n        for (let i = 0; i < 5400; i++) pts[i] = (Math.random() - 0.5) * 15;\n        geo.setAttribute('position', new THREE.BufferAttribute(pts, 3));\n\n        const mat = new THREE.PointsMaterial({\n            size: 0.025,\n            color: 0x00f5ff,\n            transparent: true,\n            opacity: 0.6,\n            blending: THREE.AdditiveBlending\n        });\n\n        const cloud = new THREE.Points(geo, mat);\n        scene.add(cloud);\n\n        const animateHero = () => {\n            requestAnimationFrame(animateHero);\n            cloud.rotation.y += 0.0008;\n            cloud.rotation.x += 0.0004;\n            renderer.render(scene, camera);\n        };\n        animateHero();\n\n        window.addEventListener('resize', () => {\n            camera.aspect = window.innerWidth / window.innerHeight;\n            camera.updateProjectionMatrix();\n            renderer.setSize(window.innerWidth, window.innerHeight);\n        });\n\n        // SplitText Animation\n        const title = document.querySelector('.hero__title');\n        if (title) {\n            const split = new SplitType(title, { types: 'chars' });\n            gsap.timeline({ delay: 0.5 })\n                .from(split.chars, { y: 60, opacity: 0, rotateX: -90, stagger: 0.02, duration: 1, ease: 'power4.out' })\n                .to('.hero__subtitle, .hero__actions, .scroll-down', { opacity: 1, y: 0, stagger: 0.2, duration: 0.8 }, \"-=0.6\");\n        }\n    };\n    initHeroScene();\n\n\n    // --- 6. INFRASTRUCTURE: ISOMETRIC LAYERED STACK ---\n    const layers = document.querySelectorAll('.stack__layer');\n    const infraItems = document.querySelectorAll('.infra-item');\n\n    if (layers.length > 0) {\n        // Эффект \"разлета\" слоев при скролле\n        gsap.to(layers, {\n            scrollTrigger: {\n                trigger: \".infra\",\n                start: \"top 70%\",\n                end: \"bottom 20%\",\n                scrub: 1\n            },\n            z: (i) => (i * 80),\n            y: (i) => (i * -35),\n            duration: 1\n        });\n\n        // Интерактив при наведении на текст\n        infraItems.forEach(item => {\n            item.addEventListener('mouseenter', () => {\n                const depth = item.getAttribute('data-layer');\n                infraItems.forEach(i => i.classList.remove('active'));\n                item.classList.add('active');\n\n                layers.forEach(l => {\n                    l.style.borderColor = 'rgba(255,255,255,0.1)';\n                    l.style.boxShadow = 'none';\n                    if (l.dataset.depth == depth) {\n                        l.style.borderColor = 'var(--accent)';\n                        l.style.boxShadow = '0 0 40px var(--accent-glow)';\n                        gsap.to(l, { scale: 1.05, duration: 0.4 });\n                    } else {\n                        gsap.to(l, { scale: 1, duration: 0.4 });\n                    }\n                });\n            });\n        });\n    }\n\n\n    // --- 7. ACADEMY: FLOATING IMAGE PREVIEW ---\n    const floatingImg = document.querySelector('.academy-cursor-img');\n    const academyItems = document.querySelectorAll('.academy-item');\n\n    academyItems.forEach(item => {\n        item.addEventListener('mouseenter', () => {\n            const src = item.getAttribute('data-img');\n            if (floatingImg) {\n                floatingImg.querySelector('img').src = src;\n                gsap.to(floatingImg, { opacity: 1, scale: 1, duration: 0.3 });\n            }\n        });\n        item.addEventListener('mouseleave', () => {\n            if (floatingImg) gsap.to(floatingImg, { opacity: 0, scale: 0.8, duration: 0.3 });\n        });\n        item.addEventListener('mousemove', (e) => {\n            if (floatingImg) {\n                gsap.to(floatingImg, {\n                    x: e.clientX + 25,\n                    y: e.clientY - 120,\n                    duration: 0.6,\n                    ease: \"power2.out\"\n                });\n            }\n        });\n    });\n\n\n    // --- 8. CONTACT FORM: VALIDATION & SUCCESS ---\n    const contactForm = document.getElementById('contact-form');\n    const phoneInput = document.getElementById('phone-input');\n    const successBox = document.getElementById('form-success');\n\n    phoneInput?.addEventListener('input', (e) => {\n        e.target.value = e.target.value.replace(/[^\\d+]/g, '');\n    });\n\n    contactForm?.addEventListener('submit', (e) => {\n        e.preventDefault();\n        const userAnswer = parseInt(document.getElementById('captcha-answer').value);\n\n        if (userAnswer !== sumCorrect) {\n            alert('Неверный ответ на защитный вопрос!');\n            generateCaptcha();\n            return;\n        }\n\n        const btn = contactForm.querySelector('button');\n        btn.innerText = 'Интеграция...';\n        btn.disabled = true;\n\n        setTimeout(() => {\n            gsap.to(contactForm, {\n                opacity: 0,\n                y: -20,\n                duration: 0.4,\n                onComplete: () => {\n                    contactForm.style.display = 'none';\n                    if (successBox) {\n                        successBox.style.display = 'flex';\n                        gsap.fromTo(successBox, \n                            { opacity: 0, scale: 0.9, y: 20 },\n                            { opacity: 1, scale: 1, y: 0, duration: 0.6, ease: \"back.out(1.7)\" }\n                        );\n                    }\n                }\n            });\n        }, 1500);\n    });\n\n\n    // --- 9. COOKIE POPUP ---\n    const cookiePopup = document.getElementById('cookie-popup');\n    if (!localStorage.getItem('rho_form_cookies')) {\n        setTimeout(() => cookiePopup?.classList.add('cookie-popup--active'), 3000);\n    }\n    document.getElementById('accept-cookies')?.addEventListener('click', () => {\n        localStorage.setItem('rho_form_cookies', 'true');\n        cookiePopup?.classList.remove('cookie-popup--active');\n    });\n\n    console.log('Rho-Form Fit: Engine Operational');\n});"],"names":["lenis","t","time","sumCorrect","generateCaptcha","captchaLabel","val1","val2","header","menuToggle","mobileMenu","mobileLinks","toggleMenu","link","canvas","scene","camera","renderer","geo","pts","i","mat","cloud","animateHero","title","split","layers","infraItems","item","depth","l","floatingImg","src","e","contactForm","phoneInput","successBox","btn","cookiePopup","_a"],"mappings":"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"}